@model IEnumerable<FinalYearProject.Models.BugReport>

<input type="text" id="search" placeholder="Search for names..">

<table id ="tableTest" class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.BugDescription)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Category)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.isResolved)
        </th>
        <th>
            Date & Time Added
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.BugDescription)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Category)
            </td>
            <td>
                @Html.CheckBoxFor(modelItem => item.isResolved, new { id = item.Id, @class = "ActiveCheck" })
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DateAdded)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |                    
                @Html.ActionLink("Delete", "Delete", new { id = item.Id }) 
            </td>
        </tr>
    }

</table>

<script>
    if (sessionStorage.length != 0) {

        var categoryClicked = sessionStorage.getItem('categoryClicked');
        $('input:text').val(categoryClicked);

        var input, filter, table, tr, td, i;
        input = document.getElementById("search");
        filter = input.value.toUpperCase();
        table = document.getElementById("tableTest");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1];
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }

        sessionStorage.clear();

    }
</script>

<script>
    var $rows = $('#tableTest tr');
    $('#search').keyup(function () {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $rows.show().filter(function () {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).hide();
    });
    
</script>

